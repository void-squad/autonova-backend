package com.voidsquad.chatbot.service;import com.voidsquad.chatbot.service.language.LanguageProcessor;import com.voidsquad.chatbot.service.promptmanager.core.OutputFormat;import com.voidsquad.chatbot.service.promptmanager.core.ProcessingResult;import com.voidsquad.chatbot.service.promptmanager.core.ProcessingType;import org.junit.jupiter.api.Test;import org.junit.jupiter.api.extension.ExtendWith;import org.mockito.InjectMocks;import org.mockito.Mock;import org.mockito.junit.jupiter.MockitoExtension;import static org.assertj.core.api.Assertions.assertThat;import static org.mockito.ArgumentMatchers.any;import static org.mockito.Mockito.when;@ExtendWith(MockitoExtension.class)class AIServiceGenerationTest { @Mock LanguageProcessor processor; @InjectMocks AIService aiService; @Test void generation_handlesException(){ when(processor.evaluateSimpleReply(any(), any(), any())).thenThrow(new RuntimeException("boom")); String out = aiService.generation("hi"); assertThat(out).isEqualTo("Error!"); } @Test void generation_returnsNoResponseMessageWhenNull(){ when(processor.evaluateSimpleReply(any(), any(), any())).thenReturn(null); String out = aiService.generation("hi"); assertThat(out).isEqualTo("No response from model"); } @Test void generation_returnsOutput(){ ProcessingResult pr = new ProcessingResult("OK", OutputFormat.TEXT, ProcessingType.SIMPLE_CHAT, java.util.Map.of()); when(processor.evaluateSimpleReply(any(), any(), any())).thenReturn(pr); String out = aiService.generation("hi"); assertThat(out).isEqualTo("OK"); }}