apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: autonova-secrets
  namespace: autonova
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: gcpsm-secret-store
    kind: SecretStore
  target:
    name: autonova-env
    creationPolicy: Owner
  data:
  # Database Configuration
  - secretKey: POSTGRES_HOST
    remoteRef:
      key: autonova-POSTGRES_HOST
  - secretKey: POSTGRES_PORT
    remoteRef:
      key: autonova-POSTGRES_PORT
  - secretKey: POSTGRES_USER
    remoteRef:
      key: autonova-POSTGRES_USER
  - secretKey: POSTGRES_PASSWORD
    remoteRef:
      key: autonova-POSTGRES_PASSWORD
  - secretKey: PGDATABASE
    remoteRef:
      key: autonova-PGDATABASE
  
  # Service-specific DB passwords
  - secretKey: PROJECTS_DB_PASSWORD
    remoteRef:
      key: autonova-PROJECTS_DB_PASSWORD
  - secretKey: PROGRESS_MONITORING_DB_PASSWORD
    remoteRef:
      key: autonova-PROGRESS_MONITORING_DB_PASSWORD
  - secretKey: EMPLOYEE_DASHBOARD_DB_PASSWORD
    remoteRef:
      key: autonova-EMPLOYEE_DASHBOARD_DB_PASSWORD
  - secretKey: TIME_LOGGING_DB_PASSWORD
    remoteRef:
      key: autonova-TIME_LOGGING_DB_PASSWORD
  - secretKey: USER_MANAGEMENT_DB_PASSWORD
    remoteRef:
      key: autonova-USER_MANAGEMENT_DB_PASSWORD
  - secretKey: NOTIFICATION_DB_PASSWORD
    remoteRef:
      key: autonova-NOTIFICATION_DB_PASSWORD
  - secretKey: VECTOR_DB_PASSWORD
    remoteRef:
      key: autonova-VECTOR_DB_PASSWORD
  - secretKey: PBS_DB_PASSWORD
    remoteRef:
      key: autonova-PBS_DB_PASSWORD
  
  # Auth & Security
  - secretKey: JWT_SECRET
    remoteRef:
      key: autonova-JWT_SECRET
  - secretKey: GOOGLE_CLIENT_ID
    remoteRef:
      key: autonova-GOOGLE_CLIENT_ID
  - secretKey: GOOGLE_CLIENT_SECRET
    remoteRef:
      key: autonova-GOOGLE_CLIENT_SECRET
  - secretKey: EMAIL_USERNAME
    remoteRef:
      key: autonova-EMAIL_USERNAME
  - secretKey: EMAIL_PASSWORD
    remoteRef:
      key: autonova-EMAIL_PASSWORD
  
  # Payments (Stripe)
  - secretKey: STRIPE_API_KEY
    remoteRef:
      key: autonova-STRIPE_API_KEY
  - secretKey: STRIPE_WEBHOOK_SECRET
    remoteRef:
      key: autonova-STRIPE_WEBHOOK_SECRET
  - secretKey: STRIPE_PUBLISHABLE_KEY
    remoteRef:
      key: autonova-STRIPE_PUBLISHABLE_KEY
  
  # AI/Chatbot
  - secretKey: GEMINI_API_KEY
    remoteRef:
      key: autonova-GEMINI_API_KEY
  - secretKey: SPRING_AI_OLLAMA_BASE_URL
    remoteRef:
      key: autonova-SPRING_AI_OLLAMA_BASE_URL
  
  # RabbitMQ
  - secretKey: RABBITMQ_PASSWORD
    remoteRef:
      key: autonova-RABBITMQ_PASSWORD
  
  # URLs
  - secretKey: FRONTEND_URL
    remoteRef:
      key: autonova-FRONTEND_URL
